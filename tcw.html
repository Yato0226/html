<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TCW Reviewer (Fixed)</title>
    <style>
        :root {
            /* TCW Green Theme */
            --primary: #27ae60;
            --accent: #2ecc71;
            --success: #219150;
            --error: #e74c3c;
            --bg: #f4f4f9;
            --text: #333;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            padding: 20px;
            margin: 0;
            display: flex;
            justify-content: center;
            min-height: 100vh;
        }
        .container {
            width: 100%;
            max-width: 800px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        
        /* Header */
        .header {
            background: var(--primary);
            color: white;
            padding: 20px;
            text-align: center;
            position: relative;
        }
        .header h1 { margin: 0; font-size: 1.5rem; }
        .category-badge {
            background: rgba(0,0,0,0.2);
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            margin-top: 10px;
            display: inline-block;
        }

        /* Screens */
        .screen { display: none; padding: 30px; flex: 1; }
        .screen.active { display: flex; flex-direction: column; }

        /* Start Screen */
        .start-screen { text-align: center; justify-content: center; align-items: center; gap: 20px; }
        .btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2rem;
            border-radius: 8px;
            cursor: pointer;
            transition: transform 0.2s, background 0.2s;
            margin-top: 10px;
        }
        .btn:hover { transform: translateY(-2px); background: var(--accent); }

        /* Quiz Screen */
        .progress-bar {
            height: 6px;
            background: #eee;
            width: 100%;
        }
        .progress-fill {
            height: 100%;
            background: var(--accent);
            width: 0%;
            transition: width 0.3s ease;
        }
        .stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            font-weight: bold;
            color: #7f8c8d;
            font-size: 0.9rem;
        }
        .question-text {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 25px;
            line-height: 1.4;
        }
        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }
        .option-btn {
            background: white;
            border: 2px solid #e0e0e0;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.2s;
            color: var(--text);
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 60px;
        }
        .option-btn:hover:not(:disabled) {
            border-color: var(--accent);
            background: #f0fdf4;
        }
        .option-btn.correct {
            background-color: #d4edda;
            border-color: var(--success);
            color: #155724;
        }
        .option-btn.wrong {
            background-color: #f8d7da;
            border-color: var(--error);
            color: #721c24;
        }
        .option-btn:disabled {
            cursor: default;
            opacity: 0.7;
        }

        /* Feedback Section */
        .feedback-box {
            margin-top: 20px;
            padding: 15px;
            background: #eef2f5;
            border-left: 5px solid var(--accent);
            border-radius: 4px;
            display: none;
            animation: fadeIn 0.3s ease;
        }
        .feedback-box.show { display: block; }
        .feedback-title { font-weight: bold; display: block; margin-bottom: 5px; color: var(--primary); }

        /* Result Screen */
        .result-screen { text-align: center; justify-content: center; align-items: center; }
        .score-circle {
            width: 150px;
            height: 150px;
            background: var(--primary);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 2.5rem;
            font-weight: bold;
            margin: 20px auto;
            box-shadow: 0 5px 15px rgba(39, 174, 96, 0.4);
        }
        .message { margin-bottom: 30px; font-size: 1.2rem; color: #666; }

        @media (max-width: 600px) {
            .container { border-radius: 0; height: 100vh; }
            .question-text { font-size: 1.1rem; }
            .options-grid { grid-template-columns: 1fr; } /* Stack buttons on mobile */
            .option-btn { padding: 12px; font-size: 0.9rem; min-height: 50px; }
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <div class="container">
        <div class="header">
            <h1>TCW Reviewer</h1>
            <span id="categoryBadge" class="category-badge" style="display:none">General</span>
        </div>

        <div class="progress-bar">
            <div id="progressFill" class="progress-fill"></div>
        </div>

        <!-- Start Screen -->
        <div id="startScreen" class="screen active start-screen">
            <h2>The Contemporary World</h2>
            <p>I fixed the choices! The definition now only appears AFTER you answer.</p>
            <button class="btn" onclick="startQuiz()">Start Quiz</button>
        </div>

        <!-- Quiz Screen -->
        <div id="quizScreen" class="screen">
            <div class="stats">
                <span id="questionCount">Question 1/10</span>
                <span id="scoreDisplay">Score: 0</span>
            </div>
            <div id="questionText" class="question-text">
                Question goes here?
            </div>
            <div id="optionsGrid" class="options-grid">
                <!-- Options injected by JS -->
            </div>

            <!-- Explanation/Feedback Area -->
            <div id="feedbackBox" class="feedback-box">
                <span class="feedback-title">Did you know?</span>
                <span id="feedbackText"></span>
                <br>
                <button class="btn" id="nextBtn" style="width:100%; padding: 10px; margin-top:10px;" onclick="nextQuestion()">Next Question</button>
            </div>
        </div>

        <!-- Result Screen -->
        <div id="resultScreen" class="screen result-screen">
            <h2>Quiz Completed!</h2>
            <div class="score-circle">
                <span id="finalScore">0%</span>
            </div>
            <p id="finalMessage" class="message">Great job!</p>
            <button class="btn" onclick="startQuiz()">Retake Quiz</button>
        </div>
    </div>

<script>
// --- CLEANED DATA SOURCE ---
// a = The Choice (Term), q = The Question (Definition), info = The Explanation (After)
const rawData = [
    { category: "Global Divides", a: "Carl Oglesby", q: "Who originally coined the term 'Global South' in 1969?", info: "He was an American political activist who used the term to describe countries dominated by the North." },
    { category: "Global Divides", a: "Brandt Line", q: "What is the imaginary line proposed in the 1980s visually depicting the North-South divide?", info: "It splits the world based on GDP per capita." },
    { category: "Global Divides", a: "Northern Hemisphere", q: "Which hemisphere contains most of the 'Global North' countries?", info: "Home to richer, developed nations (except Australia/NZ)." },
    { category: "Global Divides", a: "Developing/Agrarian", q: "What is the primary economic characteristic of the 'Global South'?", info: "Economies often characterized by poverty, post-colonialism, and instability." },
    { category: "Global Divides", a: "Australia & NZ", q: "Which countries are exceptions located in the Southern Hemisphere but considered 'Global North'?", info: "They are wealthy nations located below the Brandt Line." },
    { category: "Global Divides", a: "Non-Aligned Movement", q: "What does the 'Third World' term historically refer to during the Cold War?", info: "Countries that were not aligned with NATO (1st World) or the Communist Bloc (2nd World)." },
    { category: "Global Divides", a: "75%", q: "Approximately what percentage of the world population lives in the Global South?", info: "Three-Quarters of the world resides in developing nations." },
    { category: "Global Divides", a: "Aging Population", q: "Along with overconsumption, what is a key demographic problem faced by the Global North?", info: "Issues like expensive healthcare and zero population growth due to old age." },
    { category: "Global Divides", a: "Neocolonialism", q: "What is the use of economic or political pressures to control other countries (especially former colonies)?", info: "Indirect control unlike direct military colonialism." },
    { category: "Global Divides", a: "HDI (Human Development Index)", q: "What measure of progress includes life expectancy, education, and income?", info: "It moves beyond just measuring GDP." },
    
    { category: "Asian Regionalism", a: "ASEAN", q: "What organization was established in 1967 for Southeast Asian cooperation?", info: "Association of Southeast Asian Nations." },
    { category: "Asian Regionalism", a: "1967", q: "In what year was ASEAN established?", info: "Bangkok Declaration." },
    { category: "Asian Regionalism", a: "Pol-Sec, Econ, Socio-Cult", q: "What are the three pillars of the ASEAN Community?", info: "Political-Security, Economic, and Socio-Cultural." },
    { category: "Asian Regionalism", a: "Single Market", q: "What is the primary goal of the ASEAN Economic Community (AEC)?", info: "To create a highly integrated economy with free flow of goods and skilled labor." },
    { category: "Asian Regionalism", a: "AFTA", q: "What agreement was signed in 1992 to eliminate tariffs in the region?", info: "ASEAN Free Trade Area." },
    { category: "Asian Regionalism", a: "ASEAN Way", q: "What is the style of diplomacy based on non-interference and consensus-building?", info: "Quiet diplomacy and avoiding public confrontation." },
    { category: "Asian Regionalism", a: "APSC", q: "Which ASEAN pillar focuses on human rights, justice, and regional peace?", info: "ASEAN Political-Security Community." },
    { category: "Asian Regionalism", a: "ASCC", q: "Which ASEAN pillar focuses on culture, arts, and poverty eradication?", info: "ASEAN Socio-Cultural Community." },
    { category: "Asian Regionalism", a: "Regionalism", q: "What is the formal process of dividing an area into segments or coordinating political activities?", info: "This is the top-down policy." },
    { category: "Asian Regionalism", a: "Regionalization", q: "What is the actual growth of societal integration and economic interaction within a region?", info: "This is the bottom-up process (markets, people)." },
    
    { category: "Religion", a: "Glocalization", q: "What is the practice of mixing universal religious beliefs with local practices?", info: "Universal + Local." },
    { category: "Religion", a: "Vernacularization", q: "What is the blending of religious universalism with specific native languages?", info: "Example: Using Arabic for Islam or Latin for Catholicism." },
    { category: "Religion", a: "Indigenization", q: "What is the blending of religious universalism with local rituals and ethnicity?", info: "Making the religion 'native' to the place." },
    { category: "Religion", a: "Secularization", q: "What is the transformation of a society from religious values to nonreligious values?", info: "Separation of church and state/society." },
    { category: "Religion", a: "Kenneth Pargament", q: "Who defined religion as a 'search for significance related to the sacred'?", info: "A psychologist who distinguishes religion from spirituality." },
    { category: "Religion", a: "Sacredness", q: "Complete the three elements of religion: Observable phenomenon, Organized system, and...?", info: "Something holy or divine." },
    { category: "Religion", a: "Religious Coping", q: "What is the use of religion as a psychological shield to battle life's challenges?", info: "Turning to faith during hard times." },
    { category: "Religion", a: "Christians, Muslims, Hindus", q: "What are the three largest religious groups in the world?", info: "They make up the majority of believers." },
    { category: "Religion", a: "Desecularization", q: "What concept opposes the 'demise of religion' theory (also called Resurgence)?", info: "The counter-trend where religion remains relevant." },

    { category: "Digital Divide", a: "Digital Divide", q: "What is the gap between individuals/communities who have access to ICT and those who do not?", info: "The gap in technology." },
    { category: "Digital Divide", a: "Access Divide", q: "What specific divide refers to disparities in physical ability to connect (owning a device)?", info: "First level: Do you have a computer?" },
    { category: "Digital Divide", a: "Skills Divide", q: "What specific divide refers to differences in digital literacy?", info: "Second level: Do you know how to use it?" },
    { category: "Digital Divide", a: "Homework Gap", q: "What is the struggle children face when they cannot complete assignments due to lack of home internet?", info: "A major issue in education inequality." },
    { category: "Digital Divide", a: "Elderly", q: "Which demographic most often faces a 'Skills Divide'?", info: "They may have devices but feel overwhelmed using them." },
    { category: "Digital Divide", a: "Telehealth", q: "Access to what medical service is most affected by the digital divide?", info: "Remote healthcare." },
    { category: "Digital Divide", a: "ICT", q: "What stands for Information and Communication Technology?", info: "The infrastructure of the digital age." },
    { category: "Digital Divide", a: "Digital Literacy", q: "What is the ability to find, evaluate, and compose information through digital platforms?", info: "Being smart online." },
    { category: "Digital Divide", a: "Usage Divide", q: "What divide refers to how people use tech differently (e.g., entertainment vs. education)?", info: "Rich use it for work; poor might use it only for games." },
    { category: "Digital Divide", a: "Profitability", q: "Why do rural communities often face infrastructure gaps?", info: "It is expensive for companies to build lines where few people live." },

    { category: "Culture", a: "Culturalism", q: "What is the idea that individuals are determined by their culture?", info: "You are your culture." },
    { category: "Culture", a: "Multiculturalism", q: "What is the support for the presence of several distinct ethnic groups within a society?", info: "Many cultures living together." },
    { category: "Culture", a: "Melting Pot", q: "What metaphor describes a society becoming homogeneous (Assimilation)?", info: "Everything melts into one new thing." },
    { category: "Culture", a: "Salad Bowl", q: "What metaphor describes cultures mixing but retaining unique distinctions (Integration)?", info: "Ingredients stay separate but are in the same bowl." },
    { category: "Culture", a: "Cultural Imperialism", q: "What is the imposition of one culture's values upon another?", info: "Forcing culture on others." },
    { category: "Culture", a: "Hybridity", q: "What is the blending of elements from different cultures to create something new?", info: "Mixing to create a hybrid." },
    { category: "Culture", a: "Ethnocentrism", q: "What is evaluating other cultures according to the standards of one's own?", info: "Believing your culture is the 'correct' one." },
    { category: "Culture", a: "McDonaldization", q: "What is the process by which principles of fast-food dominate society (Efficiency/Control)?", info: "Theory by George Ritzer." },
    { category: "Culture", a: "Heterogenization", q: "What view suggests globalization enables the strengthening of local cultural distinctions?", info: "Opposite of homogenization." },

    { category: "World of Ideas", a: "Global Village", q: "What is Marshall McLuhan's term for the world linked by telecommunications?", info: "The world feels like a small village." },
    { category: "World of Ideas", a: "Cyberbalkanization", q: "What is the segregation of the Internet into smaller groups with similar interests (Splinternet)?", info: "People separate into tribes online." },
    { category: "World of Ideas", a: "Echo Chamber", q: "What is an environment where a person only encounters opinions that reinforce their own?", info: "You only hear what you agree with." },
    { category: "World of Ideas", a: "Soft Power", q: "What is the ability to shape preferences through attraction (culture) rather than coercion?", info: "Winning hearts and minds (e.g., K-Pop)." },
    { category: "World of Ideas", a: "Homogenization", q: "What is the reduction in cultural diversity through the diffusion of dominant symbols?", info: "Everything starts looking the same." },
    
    { category: "Misc", a: "Globalization", q: "What is the expansion and intensification of social relations across world-time and space?", info: "The core concept of the subject." },
    { category: "Misc", a: "Outsourcing", q: "What is obtaining goods or services from an outside supplier?", info: "Contracting work out." },
    { category: "Misc", a: "Offshoring", q: "What is basing a company's processes overseas to take advantage of lower costs?", info: "Moving the factory to another country." },
    { category: "Misc", a: "WTO", q: "Which organization deals with the rules of trade between nations?", info: "World Trade Organization." },
    { category: "Misc", a: "TNCs", q: "What are companies that operate in more than one country?", info: "Transnational Corporations." }
];

// --- APP STATE ---
let quizPool = [];
let currentQuestionIndex = 0;
let score = 0;
let isAnswered = false;

// --- DOM ELEMENTS ---
const startScreen = document.getElementById('startScreen');
const quizScreen = document.getElementById('quizScreen');
const resultScreen = document.getElementById('resultScreen');

const questionText = document.getElementById('questionText');
const optionsGrid = document.getElementById('optionsGrid');
const questionCount = document.getElementById('questionCount');
const scoreDisplay = document.getElementById('scoreDisplay');
const categoryBadge = document.getElementById('categoryBadge');
const progressFill = document.getElementById('progressFill');
const finalScore = document.getElementById('finalScore');
const finalMessage = document.getElementById('finalMessage');
const feedbackBox = document.getElementById('feedbackBox');
const feedbackText = document.getElementById('feedbackText');
const nextBtn = document.getElementById('nextBtn');

// --- UTILITIES ---
function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
}

// Get 3 wrong answers (just the Terms)
function getDistractors(correctItem) {
    // 1. Get items from same category, excluding correct one
    let sameCategory = rawData.filter(item => 
        item.category === correctItem.category && item.a !== correctItem.a
    );
    
    // 2. Get items from other categories (fallback)
    let differentCategory = rawData.filter(item => 
        item.category !== correctItem.category
    );

    let distractors = [];

    // Shuffle and pick
    shuffleArray(sameCategory);
    distractors.push(...sameCategory.slice(0, 3));

    // Fill if needed
    if (distractors.length < 3) {
        shuffleArray(differentCategory);
        distractors.push(...differentCategory.slice(0, 3 - distractors.length));
    }
    
    // Return only the Answer strings
    return distractors.map(d => d.a);
}

// --- GAME LOGIC ---

function startQuiz() {
    quizPool = shuffleArray([...rawData]); 
    currentQuestionIndex = 0;
    score = 0;
    isAnswered = false;

    startScreen.classList.remove('active');
    resultScreen.classList.remove('active');
    quizScreen.classList.add('active');
    
    showQuestion();
}

function showQuestion() {
    if (currentQuestionIndex >= quizPool.length) {
        endQuiz();
        return;
    }

    const item = quizPool[currentQuestionIndex];
    isAnswered = false;
    feedbackBox.classList.remove('show'); // Hide feedback
    optionsGrid.style.pointerEvents = 'auto'; // Enable clicks

    // Update Header
    questionCount.innerText = `Question ${currentQuestionIndex + 1} / ${quizPool.length}`;
    scoreDisplay.innerText = `Score: ${score}`;
    categoryBadge.innerText = item.category;
    categoryBadge.style.display = 'inline-block';
    
    const progressPercent = ((currentQuestionIndex) / quizPool.length) * 100;
    progressFill.style.width = `${progressPercent}%`;

    // Set Question
    questionText.innerText = item.q;

    // Generate Options
    const distractors = getDistractors(item);
    const options = [item.a, ...distractors];
    shuffleArray(options);

    // Render Buttons
    optionsGrid.innerHTML = '';
    options.forEach(opt => {
        const btn = document.createElement('button');
        btn.className = 'option-btn';
        btn.innerText = opt;
        btn.onclick = () => handleAnswer(btn, opt, item);
        optionsGrid.appendChild(btn);
    });
}

function handleAnswer(selectedBtn, selectedAnswer, item) {
    if (isAnswered) return;
    isAnswered = true;

    const buttons = optionsGrid.querySelectorAll('.option-btn');
    optionsGrid.style.pointerEvents = 'none'; // Prevent double clicks

    let isCorrect = false;

    if (selectedAnswer === item.a) {
        score++;
        selectedBtn.classList.add('correct');
        isCorrect = true;
    } else {
        selectedBtn.classList.add('wrong');
        // Highlight correct
        buttons.forEach(btn => {
            if (btn.innerText === item.a) {
                btn.classList.add('correct');
            }
        });
    }

    // Show Feedback
    feedbackText.innerText = isCorrect 
        ? `Correct! ${item.info}` 
        : `Wrong. The correct answer is ${item.a}. ${item.info}`;
    
    feedbackBox.classList.add('show');
    
    // Auto-scroll to feedback on mobile
    if(window.innerWidth < 600) {
        feedbackBox.scrollIntoView({behavior: "smooth"});
    }
}

function nextQuestion() {
    currentQuestionIndex++;
    showQuestion();
}

function endQuiz() {
    quizScreen.classList.remove('active');
    resultScreen.classList.add('active');

    const percentage = Math.round((score / quizPool.length) * 100);
    finalScore.innerText = `${percentage}%`;
    progressFill.style.width = '100%';

    if (percentage === 100) finalMessage.innerText = "Perfect! You're a Global Citizen!";
    else if (percentage >= 80) finalMessage.innerText = "Excellent! You know the world well.";
    else if (percentage >= 60) finalMessage.innerText = "Good job! A bit more reading on the regions.";
    else finalMessage.innerText = "Keep reviewing the contemporary world concepts.";
}
</script>

</body>
</html>